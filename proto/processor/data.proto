syntax = "proto3";
package backend.processor.api;

enum Action {
  CREDIT = 0;
  DEBIT = 1;
}

message CreateAccountRequest {
  string uid = 1;
}

message ResetRequest {}

message CreditRequest {
  string id = 1;
  string uid = 2;
  int64 amount = 3;
}
message CreditResponse {
  string msg = 1;
  int64 balance = 2;
}

message DebitRequest {
  string id = 1;
  string uid = 2;
  int64 amount = 3;
}
message DebitResponse {
  string msg = 1;
  int64 balance = 2;
}

message GetUserBalanceRequest {
  string uid = 1;
}
message GetUserBalanceResponse {
  string msg = 1;
  int64 balance = 2;
}

message ListUserTransactionsRequest {
  string uid = 1;
  int64 limit = 2;
  int64 page = 3;
}
message ListUserTransactionsResponse {
  message Data {
    string id = 1;
    int64 amount = 2;
    string action = 3;
  }
  string msg = 1;
  repeated Data data = 2;
  int64 total = 3;
}

message StreamTransactionRequest {
  string id = 1;
  string uid = 2;
  int64 amo = 3;
  Action act = 4;
}
message StreamTransactionResponse {
  string msg = 1;
  uint64 b = 2;
}
